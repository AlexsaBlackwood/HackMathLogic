{% extends 'base.html' %}

{% block content %}
<h1>Просмотр подтемы</h1>
<div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin-bottom: 25px;">
    <h2 style="color: white; border: none; padding: 0; margin: 0;">{{subtheme.title}}</h2>
    <div class="breadcrumb" style="color: rgba(255,255,255,0.9); margin-top: 10px;">
        <a href="{% url 'theme_view' theme.id %}" style="color: white;">{{theme.title}}</a>
    </div>
</div>

{% if subtheme.articles.all %}
    <h3>Теоретический материал:</h3>
    {% for article in subtheme.articles.all %}
        <div class="card article-content">
            <div class="article-text">{{article.text|safe}}</div>
        </div>
    {% endfor %}
{% endif %}

<hr>

<h3>Тесты:</h3>
{% if subtheme.tests.all %}
    {% for test in subtheme.tests.all %}
        <div class="card">
            <h4>
                <a href="{% url 'test_view' theme.id subtheme.id test.id %}">{{test.question}}</a>
            </h4>
        </div>
    {% endfor %}
{% else %}
    <div class="empty-state">Тесты отсутствуют</div>
{% endif %}

<div style="margin-top: 25px;">
    <a href="{% url 'tests_list' theme.id subtheme.id %}" class="btn">Все тесты</a>
    {% if user.is_authenticated and user.profile and user.profile.role != 'STUDENT' %}
        <a href="{% url 'test_add' theme.id subtheme.id %}" class="btn btn-success">+ Добавить тест</a>
        <a href="{% url 'subtheme_edit' theme.id subtheme.id %}" class="btn btn-secondary">Редактировать</a>
    {% endif %}
    <a href="{% url 'theme_view' theme.id %}" class="btn btn-secondary">← Назад</a>
</div>
{% endblock %}